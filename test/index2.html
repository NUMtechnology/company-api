<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>NUM Company API Example</title>
</head>

<body>
  <script src="../dist/bundle.js"></script>
  <h1>NUM Company API Example</h1>
  <div>
    Domain = <input type="text" value="aviva.co.uk" id='urivalue1' onchange="reloadRecord(1)">
    <input type="button" value="Reload" onclick="reloadRecord(1)"><span id="duration1"></span>
  </div>
  <div style="border: 1px solid blue;width: fit-content;">
    <pre id='num1'></pre>
  </div>


  <div>
    Domain = <input type="text" value="lloydsbank.com" id='urivalue2' onchange="reloadRecord(2)">
    <input type="button" value="Reload" onclick="reloadRecord(2)"><span id="duration2"></span>
  </div>
  <div style="border: 1px solid blue;width: fit-content;">
    <pre id='num2'></pre>
  </div>


  <div>
    Domain = <input type="text" value="axa.co.uk" id='urivalue3' onchange="reloadRecord(3)">
    <input type="button" value="Reload" onclick="reloadRecord(3)"><span id="duration3"></span>
  </div>
  <div style="border: 1px solid blue;width: fit-content;">
    <pre id='num3'></pre>
  </div>
  <script>

    function lookup(uri) {
      return CompanyApi.api.lookupDomain(uri);
    }

    function reloadRecord(n) {
      const uri = document.getElementById('urivalue' + n).value;
      const start = Date.now();
      lookup(uri).then((result) => {
        const end = Date.now();
        const duration = end - start;
        const pretty = JSON.stringify(result, null, 1);
        document.getElementById('num' + n).innerHTML = pretty;
        document.getElementById('duration' + n).innerHTML = `${duration}ms`;
      });

    }

    window.addEventListener('load', function () {
      reloadRecord(1);
      reloadRecord(2);
      reloadRecord(3);
    });

  </script>
</body>

</html>